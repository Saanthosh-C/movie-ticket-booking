{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Senthil Kumar P\\\\Downloads\\\\movie-ticket-booking\\\\client\\\\src\\\\components\\\\Graph.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend } from 'chart.js';\nimport axios from \"axios\";\nimport backendUrl from \"../config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\nconst Graph = () => {\n  _s();\n  const [graphData, setGraphData] = useState({\n    labels: [],\n    data: []\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(`${backendUrl}/api/dashboard`);\n        const monthCounts = {};\n        response.data.userBookings.forEach(booking => {\n          const month = new Date(booking.date).toLocaleString('en-US', {\n            month: 'long'\n          }).toUpperCase();\n          monthCounts[month] = (monthCounts[month] || 0) + 1;\n        });\n        const labels = Object.keys(monthCounts);\n        const data = Object.values(monthCounts);\n        setGraphData({\n          labels,\n          data\n        });\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n    fetchData();\n  }, []);\n  const chartData = {\n    labels: graphData.labels,\n    datasets: [{\n      label: 'Tickets Sold',\n      data: graphData.data,\n      backgroundColor: 'rgba(75, 192, 192, 0.2)',\n      borderColor: 'rgba(75, 192, 192, 1)',\n      borderWidth: 1\n    }]\n  };\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'top'\n      },\n      title: {\n        display: true,\n        text: 'Tickets Sold Per Month'\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: graphData.labels.length > 0 ? /*#__PURE__*/_jsxDEV(Bar, {\n      data: chartData,\n      options: options\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n_s(Graph, \"Ksxvk65r3mxEqusOMdEZIEtQ5wE=\");\n_c = Graph;\nexport default Graph;\nvar _c;\n$RefreshReg$(_c, \"Graph\");","map":{"version":3,"names":["React","useState","useEffect","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","axios","backendUrl","jsxDEV","_jsxDEV","register","Graph","_s","graphData","setGraphData","labels","data","fetchData","response","get","monthCounts","userBookings","forEach","booking","month","Date","date","toLocaleString","toUpperCase","Object","keys","values","error","console","chartData","datasets","label","backgroundColor","borderColor","borderWidth","options","responsive","plugins","legend","position","title","display","text","children","length","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Senthil Kumar P/Downloads/movie-ticket-booking/client/src/components/Graph.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport axios from \"axios\";\nimport backendUrl from \"../config\";\n\n\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\n\nconst Graph = () => {\n  const [graphData, setGraphData] = useState({ labels: [], data: [] });\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(`${backendUrl}/api/dashboard`);\n\n        \n        \n        const monthCounts = {};\n        response.data.userBookings.forEach((booking) => {\n          const month = new Date(booking.date).toLocaleString('en-US', { month: 'long' }).toUpperCase();\n          monthCounts[month] = (monthCounts[month] || 0) + 1;\n        });\n\n       \n        const labels = Object.keys(monthCounts);\n        const data = Object.values(monthCounts);\n\n        setGraphData({ labels, data });\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const chartData = {\n    labels: graphData.labels,\n    datasets: [\n      {\n        label: 'Tickets Sold',\n        data: graphData.data,\n        backgroundColor: 'rgba(75, 192, 192, 0.2)',\n        borderColor: 'rgba(75, 192, 192, 1)',\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  const options = {\n    responsive: true,\n    plugins: {\n      legend: { position: 'top' },\n      title: { display: true, text: 'Tickets Sold Per Month' },\n    },\n  };\n\n  return (\n    <div>\n      {graphData.labels.length > 0 ? (\n        <Bar data={chartData} options={options} />\n      ) : (\n        <p>Loading data...</p>\n      )}\n    </div>\n  );\n};\n\nexport default Graph;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}